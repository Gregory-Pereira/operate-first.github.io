{"componentChunkName":"component---src-templates-jupyter-notebook-js","path":"/data-science/github-labeler/models/train_models.ipynb","result":{"data":{"site":{"siteMetadata":{"title":"Operate First"}},"jupyterNotebook":{"id":"644119b7-387c-5f1f-b89f-f17a2432ef97 >>> JupyterNotebook","html":"<div class=\"notebook-render\"><div class=\"sc-ifAKCX zMCZx\"><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-iwsKbI exQuEV markdown\"><p>In this notebook we train models to predict issue labels and test which models are effective. The basic flow of the notebook is such: one reads in the data, examines it and sets some parameters such as ignored labels, then trains both a SVM and fastText model as a binary classification task on each label. Negative samples are taken evenly throughout the other labels. Whichever labels&#x27; models perform better than some specified benchmark are then trained on the whole dataset and saved to Ceph. A text file is saved containing which labels&#x27; models are saved that a Flask app will then perform inference on.</p></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-iwsKbI exQuEV markdown\"><h4>First we import packages, set up our Ceph client, and read in the data.</h4></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[1]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#0000ff\">import</span> pandas <span class=\"token\" style=\"color:#0000ff\">as</span> pd\n<span class=\"token\" style=\"color:#0000ff\">import</span> numpy <span class=\"token\" style=\"color:#0000ff\">as</span> np\n<span class=\"token\" style=\"color:#0000ff\">import</span> itertools\n<span class=\"token\" style=\"color:#0000ff\">import</span> collections\n<span class=\"token\" style=\"color:#0000ff\">import</span> os\n<span class=\"token\" style=\"color:#0000ff\">import</span> seaborn <span class=\"token\" style=\"color:#0000ff\">as</span> sns\n<span class=\"token\" style=\"color:#0000ff\">from</span> sklearn<span class=\"token\" style=\"color:#393A34\">.</span>model_selection <span class=\"token\" style=\"color:#0000ff\">import</span> KFold\n<span class=\"token\" style=\"color:#0000ff\">import</span> boto3\n<span class=\"token\" style=\"color:#0000ff\">from</span> dotenv <span class=\"token\" style=\"color:#0000ff\">import</span> load_dotenv<span class=\"token\" style=\"color:#393A34\">,</span> find_dotenv\n<span class=\"token\" style=\"color:#0000ff\">import</span> sys\n<span class=\"token\" style=\"color:#0000ff\">from</span> joblib <span class=\"token\" style=\"color:#0000ff\">import</span> dump\n<span class=\"token\" style=\"color:#0000ff\">from</span> model_classes <span class=\"token\" style=\"color:#0000ff\">import</span> FtModel<span class=\"token\" style=\"color:#393A34\">,</span> SVM\n<span class=\"token\" style=\"color:#0000ff\">from</span> sklearn<span class=\"token\" style=\"color:#393A34\">.</span>feature_extraction<span class=\"token\" style=\"color:#393A34\">.</span>text <span class=\"token\" style=\"color:#0000ff\">import</span> TfidfVectorizer\n\nsys<span class=\"token\" style=\"color:#393A34\">.</span>path<span class=\"token\" style=\"color:#393A34\">.</span>append<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;../src/data&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span>  <span class=\"token\" style=\"color:#008000;font-style:italic\"># noqa</span>\n<span class=\"token\" style=\"color:#0000ff\">from</span> preprocess <span class=\"token\" style=\"color:#0000ff\">import</span> process  <span class=\"token\" style=\"color:#008000;font-style:italic\"># noqa</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[2]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># load environment variables</span>\nload_dotenv<span class=\"token\" style=\"color:#393A34\">(</span>find_dotenv<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-htoDjs wOXyQ nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><pre><code><span>True</span></code></pre></div></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[3]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># whether to use ceph or store locally</span>\n\nuse_ceph <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token builtin\">bool</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token builtin\">int</span><span class=\"token\" style=\"color:#393A34\">(</span>os<span class=\"token\" style=\"color:#393A34\">.</span>getenv<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&#x27;USE_CEPH&#x27;</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span>\n\n<span class=\"token\" style=\"color:#0000ff\">if</span> use_ceph<span class=\"token\" style=\"color:#393A34\">:</span>\n    s3_endpoint_url <span class=\"token\" style=\"color:#393A34\">=</span> os<span class=\"token\" style=\"color:#393A34\">.</span>environ<span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&quot;OBJECT_STORAGE_ENDPOINT_URL&quot;</span><span class=\"token\" style=\"color:#393A34\">]</span>\n    s3_access_key <span class=\"token\" style=\"color:#393A34\">=</span> os<span class=\"token\" style=\"color:#393A34\">.</span>environ<span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&quot;AWS_ACCESS_KEY_ID&quot;</span><span class=\"token\" style=\"color:#393A34\">]</span>\n    s3_secret_key <span class=\"token\" style=\"color:#393A34\">=</span> os<span class=\"token\" style=\"color:#393A34\">.</span>environ<span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&quot;AWS_SECRET_ACCESS_KEY&quot;</span><span class=\"token\" style=\"color:#393A34\">]</span>\n    s3_bucket <span class=\"token\" style=\"color:#393A34\">=</span> os<span class=\"token\" style=\"color:#393A34\">.</span>environ<span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&quot;OBJECT_STORAGE_BUCKET_NAME&quot;</span><span class=\"token\" style=\"color:#393A34\">]</span>\n\n    s3 <span class=\"token\" style=\"color:#393A34\">=</span> boto3<span class=\"token\" style=\"color:#393A34\">.</span>client<span class=\"token\" style=\"color:#393A34\">(</span>\n        service_name<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;s3&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span>\n        aws_access_key_id<span class=\"token\" style=\"color:#393A34\">=</span>s3_access_key<span class=\"token\" style=\"color:#393A34\">,</span>\n        aws_secret_access_key<span class=\"token\" style=\"color:#393A34\">=</span>s3_secret_key<span class=\"token\" style=\"color:#393A34\">,</span>\n        endpoint_url<span class=\"token\" style=\"color:#393A34\">=</span>s3_endpoint_url<span class=\"token\" style=\"color:#393A34\">,</span>\n    <span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[4]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\">name <span class=\"token\" style=\"color:#393A34\">=</span> os<span class=\"token\" style=\"color:#393A34\">.</span>getenv<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;REPO_NAME&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span>\n\n<span class=\"token\" style=\"color:#0000ff\">if</span> <span class=\"token\" style=\"color:#A31515\">&quot;/&quot;</span> <span class=\"token\" style=\"color:#0000ff\">in</span> name<span class=\"token\" style=\"color:#393A34\">:</span>\n    REPO <span class=\"token\" style=\"color:#393A34\">=</span> name\n    USER <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#A31515\">&quot;&quot;</span>\n<span class=\"token\" style=\"color:#0000ff\">else</span><span class=\"token\" style=\"color:#393A34\">:</span>\n    USER <span class=\"token\" style=\"color:#393A34\">=</span> name\n    REPO <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#A31515\">&quot;&quot;</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[5]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># repo data is saved as {org_name}-_-{repo_name}</span>\n<span class=\"token\" style=\"color:#008000;font-style:italic\"># orginization data is saved as {org_name}</span>\n\nsavename <span class=\"token\" style=\"color:#393A34\">=</span> USER <span class=\"token\" style=\"color:#0000ff\">if</span> USER <span class=\"token\" style=\"color:#0000ff\">else</span> REPO<span class=\"token\" style=\"color:#393A34\">.</span>replace<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;/&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span> <span class=\"token\" style=\"color:#A31515\">&quot;-_-&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span>\npath <span class=\"token\" style=\"color:#393A34\">=</span> os<span class=\"token\" style=\"color:#393A34\">.</span>path<span class=\"token\" style=\"color:#393A34\">.</span>join<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;../data&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span> savename <span class=\"token\" style=\"color:#393A34\">+</span> <span class=\"token\" style=\"color:#A31515\">&quot;.csv&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span>\nkey <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token string-interpolation\"><span class=\"token\" style=\"color:#A31515\">f&quot;github-labeler/data/</span><span class=\"token interpolation\"><span class=\"token\" style=\"color:#393A34\">{</span>savename<span class=\"token\" style=\"color:#393A34\">}</span></span><span class=\"token\" style=\"color:#A31515\">.csv&quot;</span></span>\n\n<span class=\"token\" style=\"color:#0000ff\">if</span> use_ceph<span class=\"token\" style=\"color:#393A34\">:</span>\n    response <span class=\"token\" style=\"color:#393A34\">=</span> s3<span class=\"token\" style=\"color:#393A34\">.</span>get_object<span class=\"token\" style=\"color:#393A34\">(</span>Bucket<span class=\"token\" style=\"color:#393A34\">=</span>s3_bucket<span class=\"token\" style=\"color:#393A34\">,</span> Key<span class=\"token\" style=\"color:#393A34\">=</span>key<span class=\"token\" style=\"color:#393A34\">)</span>\n    issues_df <span class=\"token\" style=\"color:#393A34\">=</span> pd<span class=\"token\" style=\"color:#393A34\">.</span>read_csv<span class=\"token\" style=\"color:#393A34\">(</span>response<span class=\"token\" style=\"color:#393A34\">.</span>get<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;Body&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">.</span>drop_duplicates<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span>\n<span class=\"token\" style=\"color:#0000ff\">else</span><span class=\"token\" style=\"color:#393A34\">:</span>\n    issues_df <span class=\"token\" style=\"color:#393A34\">=</span> pd<span class=\"token\" style=\"color:#393A34\">.</span>read_csv<span class=\"token\" style=\"color:#393A34\">(</span>path<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">.</span>drop_duplicates<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[6]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\">issues_df<span class=\"token\" style=\"color:#393A34\">.</span>sample<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#36acaa\">5</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-htoDjs wOXyQ nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><div><div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>id</th>\n      <th>repo</th>\n      <th>title</th>\n      <th>body</th>\n      <th>created_at</th>\n      <th>created_by</th>\n      <th>num_labels</th>\n      <th>labels</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>5510</th>\n      <td>openshift/origin/14137</td>\n      <td>openshift/origin</td>\n      <td>oadm policy commands should print a message af...</td>\n      <td>@mfojtik spotted that SCC-related command like...</td>\n      <td>2017-05-11 10:27:50</td>\n      <td>php-coder</td>\n      <td>3</td>\n      <td>component/cli\\tarea/usability\\tpriority/P3</td>\n    </tr>\n    <tr>\n      <th>5111</th>\n      <td>openshift/origin/13316</td>\n      <td>openshift/origin</td>\n      <td>potential performance cleanup of the authorizer</td>\n      <td>There were a couple comments about running toL...</td>\n      <td>2017-03-09 12:52:37</td>\n      <td>deads2k</td>\n      <td>3</td>\n      <td>priority/P3\\tcomponent/auth\\tarea/techdebt</td>\n    </tr>\n    <tr>\n      <th>4674</th>\n      <td>openshift/origin/12077</td>\n      <td>openshift/origin</td>\n      <td>Windows Client Fails to Compile</td>\n      <td>As seen in the [`devenv_ami` jobs](https://ci....</td>\n      <td>2016-11-30 17:37:42</td>\n      <td>stevekuznetsov</td>\n      <td>3</td>\n      <td>kind/bug\\tpriority/P0\\tarea/compatibility</td>\n    </tr>\n    <tr>\n      <th>7774</th>\n      <td>openshift/origin/19848</td>\n      <td>openshift/origin</td>\n      <td>Allow to add a new component defined externall...</td>\n      <td>The new `oc cluster add` command allows to add...</td>\n      <td>2018-05-25 14:51:59</td>\n      <td>cmoulliard</td>\n      <td>5</td>\n      <td>priority/P2\\tcomponent/cluster-up\\tsig/master\\...</td>\n    </tr>\n    <tr>\n      <th>685</th>\n      <td>openshift/origin/2488</td>\n      <td>openshift/origin</td>\n      <td>Deprecate / Remove the osc build-log command</td>\n      <td>As the build pods now matches the name of the ...</td>\n      <td>2015-05-26 11:22:07</td>\n      <td>mfojtik</td>\n      <td>0</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n</div></div></div></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-iwsKbI exQuEV markdown\"><h4>Here we examine the labels a bit. We can define any labels that are synonyms and define bots whose issues we don&#x27;t want to include</h4></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[7]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># outputwith all labels more samples than &quot;cutoff&quot;, in order.</span>\n\ncutoff <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#36acaa\">0</span>\n\nlabel_lst <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token builtin\">list</span><span class=\"token\" style=\"color:#393A34\">(</span>\n    itertools<span class=\"token\" style=\"color:#393A34\">.</span>chain<span class=\"token\" style=\"color:#393A34\">.</span>from_iterable<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">[</span>ls<span class=\"token\" style=\"color:#393A34\">.</span>split<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;\\t&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#0000ff\">for</span> ls <span class=\"token\" style=\"color:#0000ff\">in</span> issues_df<span class=\"token\" style=\"color:#393A34\">.</span>labels<span class=\"token\" style=\"color:#393A34\">.</span>dropna<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">)</span>\n<span class=\"token\" style=\"color:#393A34\">)</span>\ncounter <span class=\"token\" style=\"color:#393A34\">=</span> collections<span class=\"token\" style=\"color:#393A34\">.</span>Counter<span class=\"token\" style=\"color:#393A34\">(</span>label_lst<span class=\"token\" style=\"color:#393A34\">)</span>\n\n<span class=\"token\" style=\"color:#0000ff\">for</span> a<span class=\"token\" style=\"color:#393A34\">,</span> b <span class=\"token\" style=\"color:#0000ff\">in</span> counter<span class=\"token\" style=\"color:#393A34\">.</span>most_common<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span>\n    <span class=\"token\" style=\"color:#0000ff\">if</span> b <span class=\"token\" style=\"color:#393A34\">&gt;</span> cutoff<span class=\"token\" style=\"color:#393A34\">:</span>\n        <span class=\"token\" style=\"color:#0000ff\">print</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token string-interpolation\"><span class=\"token\" style=\"color:#A31515\">f&quot;</span><span class=\"token interpolation\"><span class=\"token\" style=\"color:#393A34\">{</span>a<span class=\"token\" style=\"color:#393A34\">}</span></span><span class=\"token\" style=\"color:#A31515\"> </span><span class=\"token interpolation\"><span class=\"token\" style=\"color:#393A34\">{</span>b<span class=\"token\" style=\"color:#393A34\">}</span></span><span class=\"token\" style=\"color:#A31515\">&quot;</span></span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-htoDjs wOXyQ nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><code class=\"nteract-display-area-stdout\"><span>priority/P2 3507\nkind/bug 1868\nlifecycle/rotten 1800\npriority/P3 1387\npriority/P1 1215\nkind/test-flake 1085\ncomponent/cli 873\nkind/question 748\narea/usability 655\ncomponent/build 648\ncomponent/web 637\narea/tests 599\ncomponent/apps 485\ncomponent/kubernetes 391\ncomponent/imageregistry 324\ncomponent/networking 323\nlifecycle/stale 305\ncomponent/auth 298\nsig/master 298\narea/techdebt 294\ncomponent/routing 245\ncomponent/restapi 208\narea/security 197\npriority/P0 197\ncomponent/storage 187\ncomponent/internal-tools 173\ncomponent/install 169\nlifecycle/frozen 163\nsig/developer-experience 163\nkind/post-rebase 153\ncomponent/composition 145\ncomponent/image 135\nsig/security 125\nsig/networking 118\narea/documentation 114\narea/performance 101\ncomponent/cluster-up 101\narea/infrastructure 83\ncomponent/logging 75\nsig/pod 69\nhelp wanted 67\nsig/storage 66\ncomponent/metrics 65\nkind/feature 55\ncomponent/containers 52\narea/reliability 50\narea/examples 44\narea/compatibility 41\ncomponent/templateservicebroker 41\nsig/user-interface 39\nsig/network-edge 27\ncomponent/service-catalog 25\n¯\\_(ツ)_/¯ 19\nkind/delivery-blocker 19\nsig/containers 19\nsig/cluster-lifecycle 18\nvendor-update 16\ndependency/etcd 14\ncomponent/diagnostics 14\nsig/continuous-delivery 12\nsig/ansible-service-broker 12\nkind/documentation 11\nsig/continuous-infrastructure 10\nblocked 9\ndependency/docker 9\ncomponent/scheduler 8\nneeds-api-review 8\nkind/failing-test 6\ndependency/golang 4\ndependency/devicemapper 4\nsig/kube-origin 4\nqueue/blocks-others 4\nsig/container-security 4\nsig/scalability 4\npriority/important-soon 3\nsig/monitoring 3\narea/multi-arch 2\narea/online-first 2\nsig/cluster-infrastructure 2\nsig/usability 2\nsize/S 2\nsig/integration-services 2\npriority/critical-urgent 2\nkind/cleanup 2\napproved 1\napi-approved 1\npriority/backlog 1\npriority/important-longterm 1\nsig/azure 1\ntide/merge-blocker 1\ngood first issue 1\n</span></code></div></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[8]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># define synonyms, first in set will be used name</span>\n\nsynsets <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">[</span>\n    <span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&quot;kind/bug&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span> <span class=\"token\" style=\"color:#A31515\">&quot;bug&quot;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span>\n<span class=\"token\" style=\"color:#393A34\">]</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[9]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># equate synonyms</span>\n\n<span class=\"token\" style=\"color:#0000ff\">for</span> syn <span class=\"token\" style=\"color:#0000ff\">in</span> synsets<span class=\"token\" style=\"color:#393A34\">:</span>\n\n    <span class=\"token\" style=\"color:#0000ff\">def</span> <span class=\"token\" style=\"color:#393A34\">equate_syns</span><span class=\"token\" style=\"color:#393A34\">(</span>lbl<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span>\n        <span class=\"token\" style=\"color:#0000ff\">return</span> syn<span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#36acaa\">0</span><span class=\"token\" style=\"color:#393A34\">]</span> <span class=\"token\" style=\"color:#0000ff\">if</span> lbl <span class=\"token\" style=\"color:#0000ff\">in</span> syn<span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#36acaa\">1</span><span class=\"token\" style=\"color:#393A34\">:</span><span class=\"token\" style=\"color:#393A34\">]</span> <span class=\"token\" style=\"color:#0000ff\">else</span> lbl\n\n    <span class=\"token\" style=\"color:#0000ff\">def</span> <span class=\"token\" style=\"color:#393A34\">equate_list</span><span class=\"token\" style=\"color:#393A34\">(</span>lbllist<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span>\n        <span class=\"token\" style=\"color:#0000ff\">if</span> <span class=\"token builtin\">type</span><span class=\"token\" style=\"color:#393A34\">(</span>lbllist<span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#393A34\">==</span> <span class=\"token builtin\">str</span><span class=\"token\" style=\"color:#393A34\">:</span>\n            <span class=\"token\" style=\"color:#0000ff\">return</span> <span class=\"token\" style=\"color:#A31515\">&quot;\\t&quot;</span><span class=\"token\" style=\"color:#393A34\">.</span>join<span class=\"token\" style=\"color:#393A34\">(</span>\n                <span class=\"token builtin\">list</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token builtin\">set</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">[</span>equate_syns<span class=\"token\" style=\"color:#393A34\">(</span>lbl<span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#0000ff\">for</span> lbl <span class=\"token\" style=\"color:#0000ff\">in</span> lbllist<span class=\"token\" style=\"color:#393A34\">.</span>split<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;\\t&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span>\n            <span class=\"token\" style=\"color:#393A34\">)</span>\n        <span class=\"token\" style=\"color:#0000ff\">else</span><span class=\"token\" style=\"color:#393A34\">:</span>\n            <span class=\"token\" style=\"color:#0000ff\">return</span> lbllist\n\n    issues_df<span class=\"token\" style=\"color:#393A34\">.</span>labels <span class=\"token\" style=\"color:#393A34\">=</span> issues_df<span class=\"token\" style=\"color:#393A34\">.</span>labels<span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">apply</span><span class=\"token\" style=\"color:#393A34\">(</span>equate_list<span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[10]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># output histogram of number of labels</span>\n\nax <span class=\"token\" style=\"color:#393A34\">=</span> sns<span class=\"token\" style=\"color:#393A34\">.</span>histplot<span class=\"token\" style=\"color:#393A34\">(</span>issues_df<span class=\"token\" style=\"color:#393A34\">.</span>num_labels<span class=\"token\" style=\"color:#393A34\">,</span> bins<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token builtin\">int</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token builtin\">max</span><span class=\"token\" style=\"color:#393A34\">(</span>issues_df<span class=\"token\" style=\"color:#393A34\">.</span>num_labels<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span>\nax<span class=\"token\" style=\"color:#393A34\">.</span>set_xlim<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#36acaa\">0</span><span class=\"token\" style=\"color:#393A34\">,</span> <span class=\"token\" style=\"color:#36acaa\">6</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-htoDjs wOXyQ nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><pre><code><span>(0.0, 6.0)</span></code></pre><img alt=\"\" src=\"data:image/png;base64,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\n\" class=\"sc-bdVaJa jFcqvn\"/></div></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[11]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># view most common issue creators</span>\n\nissues_df<span class=\"token\" style=\"color:#393A34\">.</span>created_by<span class=\"token\" style=\"color:#393A34\">.</span>value_counts<span class=\"token\" style=\"color:#393A34\">(</span>ascending<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">False</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">.</span>head<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#36acaa\">10</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-htoDjs wOXyQ nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><pre><code><span>smarterclayton    767\ndeads2k           374\nkargakis          361\nspadgett          349\nbparees           297\nliggitt           276\nstevekuznetsov    273\nmfojtik           256\nsoltysh           139\nsosiouxme         108\nName: created_by, dtype: int64</span></code></pre></div></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[12]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># first find bots transparently tagged as such</span>\n\n\n<span class=\"token\" style=\"color:#0000ff\">def</span> <span class=\"token\" style=\"color:#393A34\">is_bot</span><span class=\"token\" style=\"color:#393A34\">(</span>name<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span>\n    <span class=\"token\" style=\"color:#0000ff\">return</span> name<span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#393A34\">-</span><span class=\"token\" style=\"color:#36acaa\">5</span><span class=\"token\" style=\"color:#393A34\">:</span><span class=\"token\" style=\"color:#393A34\">]</span> <span class=\"token\" style=\"color:#393A34\">==</span> <span class=\"token\" style=\"color:#A31515\">&quot;[bot]&quot;</span>\n\n\nall_names <span class=\"token\" style=\"color:#393A34\">=</span> issues_df<span class=\"token\" style=\"color:#393A34\">.</span>created_by<span class=\"token\" style=\"color:#393A34\">.</span>unique<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span>\n\nbots <span class=\"token\" style=\"color:#393A34\">=</span> all_names<span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#393A34\">[</span>is_bot<span class=\"token\" style=\"color:#393A34\">(</span>x<span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#0000ff\">for</span> x <span class=\"token\" style=\"color:#0000ff\">in</span> all_names<span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">]</span>\n\n<span class=\"token\" style=\"color:#0000ff\">print</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;bots found:&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span>\n<span class=\"token\" style=\"color:#0000ff\">for</span> b <span class=\"token\" style=\"color:#0000ff\">in</span> bots<span class=\"token\" style=\"color:#393A34\">:</span>\n    <span class=\"token\" style=\"color:#0000ff\">print</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;\\t&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span> b<span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-htoDjs wOXyQ nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><code class=\"nteract-display-area-stdout\"><span>bots found:\n</span></code></div></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[13]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># choose any additional bot accounts whose issues to not count</span>\n\nadditional_bots <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&quot;sesheta&quot;</span><span class=\"token\" style=\"color:#393A34\">]</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[14]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># filter out issues created by bots &amp; their labels</span>\n\nbots <span class=\"token\" style=\"color:#393A34\">=</span> np<span class=\"token\" style=\"color:#393A34\">.</span>concatenate<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">(</span>bots<span class=\"token\" style=\"color:#393A34\">,</span> additional_bots<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span>\n\nissues_df <span class=\"token\" style=\"color:#393A34\">=</span> issues_df<span class=\"token\" style=\"color:#393A34\">[</span>issues_df<span class=\"token\" style=\"color:#393A34\">.</span>created_by<span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">apply</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#0000ff\">lambda</span> x<span class=\"token\" style=\"color:#393A34\">:</span> x <span class=\"token\" style=\"color:#0000ff\">not</span> <span class=\"token\" style=\"color:#0000ff\">in</span> bots<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">]</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[15]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># most popular labels, nearly finalized</span>\n\ncutoff <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#36acaa\">50</span>\nfinal_labels <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#393A34\">]</span>\n\nlabel_lst <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token builtin\">list</span><span class=\"token\" style=\"color:#393A34\">(</span>\n    itertools<span class=\"token\" style=\"color:#393A34\">.</span>chain<span class=\"token\" style=\"color:#393A34\">.</span>from_iterable<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">[</span>ls<span class=\"token\" style=\"color:#393A34\">.</span>split<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;\\t&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#0000ff\">for</span> ls <span class=\"token\" style=\"color:#0000ff\">in</span> issues_df<span class=\"token\" style=\"color:#393A34\">.</span>labels<span class=\"token\" style=\"color:#393A34\">.</span>dropna<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">)</span>\n<span class=\"token\" style=\"color:#393A34\">)</span>\ncounter <span class=\"token\" style=\"color:#393A34\">=</span> collections<span class=\"token\" style=\"color:#393A34\">.</span>Counter<span class=\"token\" style=\"color:#393A34\">(</span>label_lst<span class=\"token\" style=\"color:#393A34\">)</span>\n\n<span class=\"token\" style=\"color:#0000ff\">for</span> a<span class=\"token\" style=\"color:#393A34\">,</span> b <span class=\"token\" style=\"color:#0000ff\">in</span> counter<span class=\"token\" style=\"color:#393A34\">.</span>most_common<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span>\n    <span class=\"token\" style=\"color:#0000ff\">if</span> b <span class=\"token\" style=\"color:#393A34\">&gt;</span> cutoff<span class=\"token\" style=\"color:#393A34\">:</span>\n        <span class=\"token\" style=\"color:#0000ff\">print</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token string-interpolation\"><span class=\"token\" style=\"color:#A31515\">f&quot;</span><span class=\"token interpolation\"><span class=\"token\" style=\"color:#393A34\">{</span>a<span class=\"token\" style=\"color:#393A34\">}</span></span><span class=\"token\" style=\"color:#A31515\"> </span><span class=\"token interpolation\"><span class=\"token\" style=\"color:#393A34\">{</span>b<span class=\"token\" style=\"color:#393A34\">}</span></span><span class=\"token\" style=\"color:#A31515\">&quot;</span></span><span class=\"token\" style=\"color:#393A34\">)</span>\n        final_labels<span class=\"token\" style=\"color:#393A34\">.</span>append<span class=\"token\" style=\"color:#393A34\">(</span>a<span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-htoDjs wOXyQ nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><code class=\"nteract-display-area-stdout\"><span>priority/P2 3507\nkind/bug 1868\nlifecycle/rotten 1800\npriority/P3 1387\npriority/P1 1215\nkind/test-flake 1085\ncomponent/cli 873\nkind/question 748\narea/usability 655\ncomponent/build 648\ncomponent/web 637\narea/tests 599\ncomponent/apps 485\ncomponent/kubernetes 391\ncomponent/imageregistry 324\ncomponent/networking 323\nlifecycle/stale 305\ncomponent/auth 298\nsig/master 298\narea/techdebt 294\ncomponent/routing 245\ncomponent/restapi 208\narea/security 197\npriority/P0 197\ncomponent/storage 187\ncomponent/internal-tools 173\ncomponent/install 169\nlifecycle/frozen 163\nsig/developer-experience 163\nkind/post-rebase 153\ncomponent/composition 145\ncomponent/image 135\nsig/security 125\nsig/networking 118\narea/documentation 114\narea/performance 101\ncomponent/cluster-up 101\narea/infrastructure 83\ncomponent/logging 75\nsig/pod 69\nhelp wanted 67\nsig/storage 66\ncomponent/metrics 65\nkind/feature 55\ncomponent/containers 52\n</span></code></div></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-iwsKbI exQuEV markdown\"><h4>Here we can choose some labels that will discard an issue entirely from the dataset (e.g. &#x27;bot&#x27; label), and we can choose some labels which we do not want to train a model to predict.</h4></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[16]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># choose labels whose issues you don&#x27;t want to include in the dset (for either positive or negative sampling)</span>\n\nexclude <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#393A34\">]</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[17]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># remove those labels</span>\n\n<span class=\"token\" style=\"color:#0000ff\">for</span> lbl <span class=\"token\" style=\"color:#0000ff\">in</span> exclude<span class=\"token\" style=\"color:#393A34\">:</span>\n    <span class=\"token\" style=\"color:#0000ff\">if</span> lbl <span class=\"token\" style=\"color:#0000ff\">in</span> final_labels<span class=\"token\" style=\"color:#393A34\">:</span>\n        final_labels<span class=\"token\" style=\"color:#393A34\">.</span>remove<span class=\"token\" style=\"color:#393A34\">(</span>lbl<span class=\"token\" style=\"color:#393A34\">)</span>\n\n\n<span class=\"token\" style=\"color:#0000ff\">def</span> <span class=\"token\" style=\"color:#393A34\">inclusion</span><span class=\"token\" style=\"color:#393A34\">(</span>lbl_list<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span>\n    <span class=\"token\" style=\"color:#0000ff\">if</span> <span class=\"token builtin\">type</span><span class=\"token\" style=\"color:#393A34\">(</span>lbl_list<span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#393A34\">==</span> <span class=\"token builtin\">str</span><span class=\"token\" style=\"color:#393A34\">:</span>\n        <span class=\"token\" style=\"color:#0000ff\">return</span> <span class=\"token\" style=\"color:#0000ff\">not</span> <span class=\"token builtin\">any</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">[</span>lbl <span class=\"token\" style=\"color:#0000ff\">in</span> lbl_list<span class=\"token\" style=\"color:#393A34\">.</span>split<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;\\t&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#0000ff\">for</span> lbl <span class=\"token\" style=\"color:#0000ff\">in</span> exclude<span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">)</span>\n    <span class=\"token\" style=\"color:#0000ff\">else</span><span class=\"token\" style=\"color:#393A34\">:</span>\n        <span class=\"token\" style=\"color:#0000ff\">return</span> <span class=\"token\" style=\"color:#36acaa\">True</span>\n\n\nnot_containing <span class=\"token\" style=\"color:#393A34\">=</span> issues_df<span class=\"token\" style=\"color:#393A34\">.</span>labels<span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">apply</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#0000ff\">lambda</span> x<span class=\"token\" style=\"color:#393A34\">:</span> inclusion<span class=\"token\" style=\"color:#393A34\">(</span>x<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span>\nissues_df <span class=\"token\" style=\"color:#393A34\">=</span> issues_df<span class=\"token\" style=\"color:#393A34\">[</span>not_containing<span class=\"token\" style=\"color:#393A34\">]</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[18]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># choose issues you do not wish to attempt to predict</span>\n\ndont_pred <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">[</span>\n    <span class=\"token\" style=\"color:#A31515\">&quot;priority/P2&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span>\n    <span class=\"token\" style=\"color:#A31515\">&quot;lifecycle/frozen&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span>\n    <span class=\"token\" style=\"color:#A31515\">&quot;lifecycle/stale&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span>\n    <span class=\"token\" style=\"color:#A31515\">&quot;priority/P3&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span>\n    <span class=\"token\" style=\"color:#A31515\">&quot;priority/P1&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span>\n    <span class=\"token\" style=\"color:#A31515\">&quot;lifecycle/rotten&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span>\n    <span class=\"token\" style=\"color:#A31515\">&quot;priority/P0&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span>\n    <span class=\"token\" style=\"color:#A31515\">&quot;lifecycle/rotten&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span>\n<span class=\"token\" style=\"color:#393A34\">]</span>\n\n<span class=\"token\" style=\"color:#0000ff\">for</span> dp <span class=\"token\" style=\"color:#0000ff\">in</span> dont_pred<span class=\"token\" style=\"color:#393A34\">:</span>\n    <span class=\"token\" style=\"color:#0000ff\">if</span> dp <span class=\"token\" style=\"color:#0000ff\">in</span> final_labels<span class=\"token\" style=\"color:#393A34\">:</span>\n        final_labels<span class=\"token\" style=\"color:#393A34\">.</span>remove<span class=\"token\" style=\"color:#393A34\">(</span>dp<span class=\"token\" style=\"color:#393A34\">)</span>\n    <span class=\"token\" style=\"color:#0000ff\">else</span><span class=\"token\" style=\"color:#393A34\">:</span>\n        <span class=\"token\" style=\"color:#0000ff\">continue</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[19]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># output histogram of number of relevant labels, finalized</span>\n\nset_dp <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token builtin\">set</span><span class=\"token\" style=\"color:#393A34\">(</span>dont_pred<span class=\"token\" style=\"color:#393A34\">)</span>\n\nnum_rel_issues <span class=\"token\" style=\"color:#393A34\">=</span> issues_df<span class=\"token\" style=\"color:#393A34\">.</span>labels<span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">apply</span><span class=\"token\" style=\"color:#393A34\">(</span>\n    <span class=\"token\" style=\"color:#0000ff\">lambda</span> x<span class=\"token\" style=\"color:#393A34\">:</span> <span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token builtin\">set</span><span class=\"token\" style=\"color:#393A34\">(</span>x<span class=\"token\" style=\"color:#393A34\">.</span>split<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;\\t&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">.</span>difference<span class=\"token\" style=\"color:#393A34\">(</span>set_dp<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#0000ff\">if</span> <span class=\"token builtin\">type</span><span class=\"token\" style=\"color:#393A34\">(</span>x<span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#393A34\">==</span> <span class=\"token builtin\">str</span> <span class=\"token\" style=\"color:#0000ff\">else</span> <span class=\"token\" style=\"color:#36acaa\">0</span>\n<span class=\"token\" style=\"color:#393A34\">)</span>\n\nax <span class=\"token\" style=\"color:#393A34\">=</span> sns<span class=\"token\" style=\"color:#393A34\">.</span>histplot<span class=\"token\" style=\"color:#393A34\">(</span>num_rel_issues<span class=\"token\" style=\"color:#393A34\">,</span> bins<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token builtin\">int</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token builtin\">max</span><span class=\"token\" style=\"color:#393A34\">(</span>num_rel_issues<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span>\nax<span class=\"token\" style=\"color:#393A34\">.</span>set_xlim<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#36acaa\">0</span><span class=\"token\" style=\"color:#393A34\">,</span> <span class=\"token\" style=\"color:#36acaa\">6</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-htoDjs wOXyQ nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><pre><code><span>(0.0, 6.0)</span></code></pre><img alt=\"\" src=\"data:image/png;base64,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\n\" class=\"sc-bdVaJa jFcqvn\"/></div></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[20]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># preprocess text</span>\n\nissues_df<span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&quot;processed&quot;</span><span class=\"token\" style=\"color:#393A34\">]</span> <span class=\"token\" style=\"color:#393A34\">=</span> issues_df<span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">apply</span><span class=\"token\" style=\"color:#393A34\">(</span>\n    <span class=\"token\" style=\"color:#0000ff\">lambda</span> row<span class=\"token\" style=\"color:#393A34\">:</span> np<span class=\"token\" style=\"color:#393A34\">.</span>array<span class=\"token\" style=\"color:#393A34\">(</span>process<span class=\"token\" style=\"color:#393A34\">(</span>row<span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&quot;title&quot;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span> row<span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&quot;body&quot;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span> axis<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">1</span>\n<span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[21]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># hacky way to make tfidf work on also tokenized text</span>\n\n\n<span class=\"token\" style=\"color:#0000ff\">def</span> <span class=\"token\" style=\"color:#393A34\">dummy_fun</span><span class=\"token\" style=\"color:#393A34\">(</span>doc<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span>\n    <span class=\"token\" style=\"color:#0000ff\">return</span> doc\n\n\ntfidf <span class=\"token\" style=\"color:#393A34\">=</span> TfidfVectorizer<span class=\"token\" style=\"color:#393A34\">(</span>\n    analyzer<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;word&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span> tokenizer<span class=\"token\" style=\"color:#393A34\">=</span>dummy_fun<span class=\"token\" style=\"color:#393A34\">,</span> preprocessor<span class=\"token\" style=\"color:#393A34\">=</span>dummy_fun<span class=\"token\" style=\"color:#393A34\">,</span> token_pattern<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">None</span>\n<span class=\"token\" style=\"color:#393A34\">)</span>\n\ntfidf<span class=\"token\" style=\"color:#393A34\">.</span>fit<span class=\"token\" style=\"color:#393A34\">(</span>issues_df<span class=\"token\" style=\"color:#393A34\">.</span>processed<span class=\"token\" style=\"color:#393A34\">.</span>values<span class=\"token\" style=\"color:#393A34\">)</span>\n\ndump<span class=\"token\" style=\"color:#393A34\">(</span>tfidf<span class=\"token\" style=\"color:#393A34\">,</span> <span class=\"token\" style=\"color:#A31515\">&#x27;tfidf.joblib&#x27;</span><span class=\"token\" style=\"color:#393A34\">)</span>\n\n<span class=\"token\" style=\"color:#0000ff\">if</span> use_ceph<span class=\"token\" style=\"color:#393A34\">:</span>\n    s3<span class=\"token\" style=\"color:#393A34\">.</span>upload_file<span class=\"token\" style=\"color:#393A34\">(</span>\n        Bucket<span class=\"token\" style=\"color:#393A34\">=</span>s3_bucket<span class=\"token\" style=\"color:#393A34\">,</span>\n        Key<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token string-interpolation\"><span class=\"token\" style=\"color:#A31515\">f&quot;github-labeler/</span><span class=\"token interpolation\"><span class=\"token\" style=\"color:#393A34\">{</span>savename<span class=\"token\" style=\"color:#393A34\">}</span></span><span class=\"token\" style=\"color:#A31515\">/tfidf.joblib&quot;</span></span><span class=\"token\" style=\"color:#393A34\">,</span>\n        Filename<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;tfidf.joblib&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span>\n    <span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[22]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#0000ff\">def</span> <span class=\"token\" style=\"color:#393A34\">get_subdataset</span><span class=\"token\" style=\"color:#393A34\">(</span>label<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span>\n    <span class=\"token triple-quoted-string\" style=\"color:#A31515\">&quot;&quot;&quot;\n    pass in a label name and get back a dataframe of positive &amp; negative samples for the label\n    we avoid taking unlabelled data as negative samples\n    negative samples are distributed evenly amongst the other labels\n    &quot;&quot;&quot;</span>\n    labelled <span class=\"token\" style=\"color:#393A34\">=</span> issues_df<span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#393A34\">~</span>issues_df<span class=\"token\" style=\"color:#393A34\">.</span>labels<span class=\"token\" style=\"color:#393A34\">.</span>isna<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">]</span>\n    final_labels_ <span class=\"token\" style=\"color:#393A34\">=</span> final_labels<span class=\"token\" style=\"color:#393A34\">.</span>copy<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span>\n    final_labels_<span class=\"token\" style=\"color:#393A34\">.</span>remove<span class=\"token\" style=\"color:#393A34\">(</span>label<span class=\"token\" style=\"color:#393A34\">)</span>\n    pos_samples <span class=\"token\" style=\"color:#393A34\">=</span> labelled<span class=\"token\" style=\"color:#393A34\">[</span>labelled<span class=\"token\" style=\"color:#393A34\">.</span>labels<span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">apply</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#0000ff\">lambda</span> x<span class=\"token\" style=\"color:#393A34\">:</span> label <span class=\"token\" style=\"color:#0000ff\">in</span> x<span class=\"token\" style=\"color:#393A34\">.</span>split<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;\\t&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">]</span>\n    n <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>pos_samples<span class=\"token\" style=\"color:#393A34\">)</span>\n    remaining <span class=\"token\" style=\"color:#393A34\">=</span> labelled<span class=\"token\" style=\"color:#393A34\">[</span>labelled<span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">id</span><span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">apply</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#0000ff\">lambda</span> x<span class=\"token\" style=\"color:#393A34\">:</span> label <span class=\"token\" style=\"color:#0000ff\">not</span> <span class=\"token\" style=\"color:#0000ff\">in</span> x<span class=\"token\" style=\"color:#393A34\">.</span>split<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;\\t&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">]</span>\n    n_neg <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#36acaa\">0</span>\n    per_label <span class=\"token\" style=\"color:#393A34\">=</span> n <span class=\"token\" style=\"color:#393A34\">//</span> <span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>final_labels_<span class=\"token\" style=\"color:#393A34\">)</span>\n    neg_ids <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token builtin\">set</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span>\n    <span class=\"token\" style=\"color:#008000;font-style:italic\"># evenly sample if we can</span>\n    <span class=\"token\" style=\"color:#008000;font-style:italic\"># if not enough samples for a label, throw them all in and increase the remaining amount we need per label</span>\n    <span class=\"token\" style=\"color:#0000ff\">for</span> i<span class=\"token\" style=\"color:#393A34\">,</span> lbl <span class=\"token\" style=\"color:#0000ff\">in</span> <span class=\"token builtin\">enumerate</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token builtin\">reversed</span><span class=\"token\" style=\"color:#393A34\">(</span>final_labels_<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span>\n        neg_samples <span class=\"token\" style=\"color:#393A34\">=</span> remaining<span class=\"token\" style=\"color:#393A34\">[</span>remaining<span class=\"token\" style=\"color:#393A34\">.</span>labels<span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">apply</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#0000ff\">lambda</span> x<span class=\"token\" style=\"color:#393A34\">:</span> lbl <span class=\"token\" style=\"color:#0000ff\">in</span> x<span class=\"token\" style=\"color:#393A34\">.</span>split<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;\\t&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">]</span>\n        <span class=\"token\" style=\"color:#0000ff\">if</span> <span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>neg_samples<span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#393A34\">&gt;=</span> per_label<span class=\"token\" style=\"color:#393A34\">:</span>\n            neg_samples <span class=\"token\" style=\"color:#393A34\">=</span> neg_samples<span class=\"token\" style=\"color:#393A34\">.</span>sample<span class=\"token\" style=\"color:#393A34\">(</span>per_label<span class=\"token\" style=\"color:#393A34\">)</span>\n            n_neg <span class=\"token\" style=\"color:#393A34\">+=</span> per_label\n        <span class=\"token\" style=\"color:#0000ff\">else</span><span class=\"token\" style=\"color:#393A34\">:</span>\n            n_neg <span class=\"token\" style=\"color:#393A34\">+=</span> <span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>neg_samples<span class=\"token\" style=\"color:#393A34\">)</span>\n            <span class=\"token\" style=\"color:#0000ff\">if</span> i <span class=\"token\" style=\"color:#393A34\">!=</span> <span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>final_labels_<span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#393A34\">-</span> <span class=\"token\" style=\"color:#36acaa\">1</span><span class=\"token\" style=\"color:#393A34\">:</span>\n                per_label <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">(</span>n <span class=\"token\" style=\"color:#393A34\">-</span> n_neg<span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#393A34\">//</span> <span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>final_labels_<span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#393A34\">-</span> i <span class=\"token\" style=\"color:#393A34\">-</span> <span class=\"token\" style=\"color:#36acaa\">1</span><span class=\"token\" style=\"color:#393A34\">)</span>\n        remaining <span class=\"token\" style=\"color:#393A34\">=</span> remaining<span class=\"token\" style=\"color:#393A34\">[</span>\n            remaining<span class=\"token\" style=\"color:#393A34\">.</span>labels<span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">apply</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#0000ff\">lambda</span> x<span class=\"token\" style=\"color:#393A34\">:</span> lbl <span class=\"token\" style=\"color:#0000ff\">not</span> <span class=\"token\" style=\"color:#0000ff\">in</span> x<span class=\"token\" style=\"color:#393A34\">.</span>split<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;\\t&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span>\n        <span class=\"token\" style=\"color:#393A34\">]</span>\n        neg_ids <span class=\"token\" style=\"color:#393A34\">=</span> neg_ids<span class=\"token\" style=\"color:#393A34\">.</span>union<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token builtin\">set</span><span class=\"token\" style=\"color:#393A34\">(</span>neg_samples<span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">id</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span>\n    <span class=\"token\" style=\"color:#008000;font-style:italic\"># fill in potential gap with unlabelled issues, if needed</span>\n    <span class=\"token\" style=\"color:#0000ff\">if</span> <span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>pos_samples<span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#393A34\">&gt;</span> <span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>neg_ids<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span>\n        unlabelled <span class=\"token\" style=\"color:#393A34\">=</span> issues_df<span class=\"token\" style=\"color:#393A34\">.</span>query<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;num_labels == 0&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span>\n        <span class=\"token\" style=\"color:#0000ff\">if</span> <span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>unlabelled<span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#393A34\">&gt;</span> <span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>pos_samples<span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#393A34\">-</span> <span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>neg_ids<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span>\n            neg_ids <span class=\"token\" style=\"color:#393A34\">=</span> neg_ids<span class=\"token\" style=\"color:#393A34\">.</span>union<span class=\"token\" style=\"color:#393A34\">(</span>\n                <span class=\"token builtin\">set</span><span class=\"token\" style=\"color:#393A34\">(</span>unlabelled<span class=\"token\" style=\"color:#393A34\">.</span>sample<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>pos_samples<span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#393A34\">-</span> <span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>neg_ids<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">id</span><span class=\"token\" style=\"color:#393A34\">)</span>\n            <span class=\"token\" style=\"color:#393A34\">)</span>\n        <span class=\"token\" style=\"color:#0000ff\">else</span><span class=\"token\" style=\"color:#393A34\">:</span>\n            neg_ids <span class=\"token\" style=\"color:#393A34\">=</span> neg_ids<span class=\"token\" style=\"color:#393A34\">.</span>union<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token builtin\">set</span><span class=\"token\" style=\"color:#393A34\">(</span>unlabelled<span class=\"token\" style=\"color:#393A34\">.</span>ids<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span>\n            pos_samples <span class=\"token\" style=\"color:#393A34\">=</span> pos_samples<span class=\"token\" style=\"color:#393A34\">.</span>sample<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>neg_ids<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span>\n    final_neg_samples <span class=\"token\" style=\"color:#393A34\">=</span> issues_df<span class=\"token\" style=\"color:#393A34\">[</span>issues_df<span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">id</span><span class=\"token\" style=\"color:#393A34\">.</span><span class=\"token builtin\">apply</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#0000ff\">lambda</span> x<span class=\"token\" style=\"color:#393A34\">:</span> x <span class=\"token\" style=\"color:#0000ff\">in</span> neg_ids<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">]</span>\n    x <span class=\"token\" style=\"color:#393A34\">=</span> pd<span class=\"token\" style=\"color:#393A34\">.</span>concat<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">(</span>final_neg_samples<span class=\"token\" style=\"color:#393A34\">,</span> pos_samples<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span>\n    y <span class=\"token\" style=\"color:#393A34\">=</span> np<span class=\"token\" style=\"color:#393A34\">.</span>concatenate<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">(</span>np<span class=\"token\" style=\"color:#393A34\">.</span>zeros<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>final_neg_samples<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span> np<span class=\"token\" style=\"color:#393A34\">.</span>ones<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>pos_samples<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span>\n    <span class=\"token\" style=\"color:#0000ff\">return</span> x<span class=\"token\" style=\"color:#393A34\">,</span> y<span class=\"token\" style=\"color:#393A34\">.</span>astype<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token builtin\">int</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[23]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#0000ff\">def</span> <span class=\"token\" style=\"color:#393A34\">predict_label</span><span class=\"token\" style=\"color:#393A34\">(</span>label<span class=\"token\" style=\"color:#393A34\">,</span> k<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">5</span><span class=\"token\" style=\"color:#393A34\">,</span> model_class<span class=\"token\" style=\"color:#393A34\">=</span>FtModel<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span>\n    <span class=\"token triple-quoted-string\" style=\"color:#A31515\">&quot;&quot;&quot;\n    validates fastText model on the given label, using k-fold cross validation\n    &quot;&quot;&quot;</span>\n    x<span class=\"token\" style=\"color:#393A34\">,</span> y <span class=\"token\" style=\"color:#393A34\">=</span> get_subdataset<span class=\"token\" style=\"color:#393A34\">(</span>label<span class=\"token\" style=\"color:#393A34\">)</span>\n    kf <span class=\"token\" style=\"color:#393A34\">=</span> KFold<span class=\"token\" style=\"color:#393A34\">(</span>n_splits<span class=\"token\" style=\"color:#393A34\">=</span>k<span class=\"token\" style=\"color:#393A34\">,</span> random_state<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">None</span><span class=\"token\" style=\"color:#393A34\">,</span> shuffle<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">True</span><span class=\"token\" style=\"color:#393A34\">)</span>\n    accuracy <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#393A34\">]</span>\n    precision <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#393A34\">]</span>\n    recall <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#393A34\">]</span>\n    <span class=\"token\" style=\"color:#0000ff\">for</span> train_index<span class=\"token\" style=\"color:#393A34\">,</span> test_index <span class=\"token\" style=\"color:#0000ff\">in</span> kf<span class=\"token\" style=\"color:#393A34\">.</span>split<span class=\"token\" style=\"color:#393A34\">(</span>x<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span>\n        model <span class=\"token\" style=\"color:#393A34\">=</span> model_class<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span>\n        x_train<span class=\"token\" style=\"color:#393A34\">,</span> x_test <span class=\"token\" style=\"color:#393A34\">=</span> x<span class=\"token\" style=\"color:#393A34\">.</span>iloc<span class=\"token\" style=\"color:#393A34\">[</span>train_index<span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span> x<span class=\"token\" style=\"color:#393A34\">.</span>iloc<span class=\"token\" style=\"color:#393A34\">[</span>test_index<span class=\"token\" style=\"color:#393A34\">]</span>\n        y_train<span class=\"token\" style=\"color:#393A34\">,</span> y_test <span class=\"token\" style=\"color:#393A34\">=</span> y<span class=\"token\" style=\"color:#393A34\">[</span>train_index<span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span> y<span class=\"token\" style=\"color:#393A34\">[</span>test_index<span class=\"token\" style=\"color:#393A34\">]</span>\n        model<span class=\"token\" style=\"color:#393A34\">.</span>fit<span class=\"token\" style=\"color:#393A34\">(</span>x_train<span class=\"token\" style=\"color:#393A34\">,</span> y_train<span class=\"token\" style=\"color:#393A34\">)</span>\n        preds <span class=\"token\" style=\"color:#393A34\">=</span> model<span class=\"token\" style=\"color:#393A34\">.</span>predict<span class=\"token\" style=\"color:#393A34\">(</span>x_test<span class=\"token\" style=\"color:#393A34\">)</span>\n        accuracy<span class=\"token\" style=\"color:#393A34\">.</span>append<span class=\"token\" style=\"color:#393A34\">(</span>np<span class=\"token\" style=\"color:#393A34\">.</span>mean<span class=\"token\" style=\"color:#393A34\">(</span>preds <span class=\"token\" style=\"color:#393A34\">==</span> y_test<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span>\n        precision_ <span class=\"token\" style=\"color:#393A34\">=</span> preds<span class=\"token\" style=\"color:#393A34\">[</span>preds <span class=\"token\" style=\"color:#393A34\">==</span> <span class=\"token\" style=\"color:#36acaa\">1</span><span class=\"token\" style=\"color:#393A34\">]</span> <span class=\"token\" style=\"color:#393A34\">==</span> y_test<span class=\"token\" style=\"color:#393A34\">[</span>preds <span class=\"token\" style=\"color:#393A34\">==</span> <span class=\"token\" style=\"color:#36acaa\">1</span><span class=\"token\" style=\"color:#393A34\">]</span>\n        <span class=\"token\" style=\"color:#0000ff\">if</span> <span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>precision_<span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#393A34\">!=</span> <span class=\"token\" style=\"color:#36acaa\">0</span><span class=\"token\" style=\"color:#393A34\">:</span>\n            precision<span class=\"token\" style=\"color:#393A34\">.</span>append<span class=\"token\" style=\"color:#393A34\">(</span>np<span class=\"token\" style=\"color:#393A34\">.</span>mean<span class=\"token\" style=\"color:#393A34\">(</span>precision_<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span>\n        recall_ <span class=\"token\" style=\"color:#393A34\">=</span> preds<span class=\"token\" style=\"color:#393A34\">[</span>y_test <span class=\"token\" style=\"color:#393A34\">==</span> <span class=\"token\" style=\"color:#36acaa\">1</span><span class=\"token\" style=\"color:#393A34\">]</span> <span class=\"token\" style=\"color:#393A34\">==</span> y_test<span class=\"token\" style=\"color:#393A34\">[</span>y_test <span class=\"token\" style=\"color:#393A34\">==</span> <span class=\"token\" style=\"color:#36acaa\">1</span><span class=\"token\" style=\"color:#393A34\">]</span>\n        <span class=\"token\" style=\"color:#0000ff\">if</span> <span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>recall_<span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#393A34\">!=</span> <span class=\"token\" style=\"color:#36acaa\">0</span><span class=\"token\" style=\"color:#393A34\">:</span>\n            recall<span class=\"token\" style=\"color:#393A34\">.</span>append<span class=\"token\" style=\"color:#393A34\">(</span>np<span class=\"token\" style=\"color:#393A34\">.</span>mean<span class=\"token\" style=\"color:#393A34\">(</span>recall_<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span>\n    cols <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&quot;label&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span> <span class=\"token\" style=\"color:#A31515\">&quot;n&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span> <span class=\"token\" style=\"color:#A31515\">&quot;accuracy&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span> <span class=\"token\" style=\"color:#A31515\">&quot;precision&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span> <span class=\"token\" style=\"color:#A31515\">&quot;recall&quot;</span><span class=\"token\" style=\"color:#393A34\">]</span>\n    data <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">[</span>label<span class=\"token\" style=\"color:#393A34\">,</span> <span class=\"token builtin\">len</span><span class=\"token\" style=\"color:#393A34\">(</span>x<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span> np<span class=\"token\" style=\"color:#393A34\">.</span>mean<span class=\"token\" style=\"color:#393A34\">(</span>accuracy<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span> np<span class=\"token\" style=\"color:#393A34\">.</span>mean<span class=\"token\" style=\"color:#393A34\">(</span>precision<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span> np<span class=\"token\" style=\"color:#393A34\">.</span>mean<span class=\"token\" style=\"color:#393A34\">(</span>recall<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">]</span>\n    <span class=\"token\" style=\"color:#0000ff\">return</span> pd<span class=\"token\" style=\"color:#393A34\">.</span>DataFrame<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">[</span>data<span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span> columns<span class=\"token\" style=\"color:#393A34\">=</span>cols<span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[24]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\">predicted_labels <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#393A34\">]</span>\n<span class=\"token\" style=\"color:#0000ff\">for</span> label <span class=\"token\" style=\"color:#0000ff\">in</span> final_labels<span class=\"token\" style=\"color:#393A34\">:</span>\n    pred_1 <span class=\"token\" style=\"color:#393A34\">=</span> predict_label<span class=\"token\" style=\"color:#393A34\">(</span>label<span class=\"token\" style=\"color:#393A34\">,</span> model_class<span class=\"token\" style=\"color:#393A34\">=</span>FtModel<span class=\"token\" style=\"color:#393A34\">)</span>\n    pred_2 <span class=\"token\" style=\"color:#393A34\">=</span> predict_label<span class=\"token\" style=\"color:#393A34\">(</span>label<span class=\"token\" style=\"color:#393A34\">,</span> model_class<span class=\"token\" style=\"color:#393A34\">=</span>SVM<span class=\"token\" style=\"color:#393A34\">)</span>\n    pred_1<span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&quot;model&quot;</span><span class=\"token\" style=\"color:#393A34\">]</span> <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#A31515\">&quot;ft&quot;</span>\n    pred_2<span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&quot;model&quot;</span><span class=\"token\" style=\"color:#393A34\">]</span> <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#A31515\">&quot;svm&quot;</span>\n    <span class=\"token\" style=\"color:#0000ff\">if</span> pred_1<span class=\"token\" style=\"color:#393A34\">.</span>iloc<span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#36acaa\">0</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">.</span>accuracy <span class=\"token\" style=\"color:#393A34\">&gt;</span> <span class=\"token\" style=\"color:#393A34\">(</span>pred_2<span class=\"token\" style=\"color:#393A34\">.</span>iloc<span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#36acaa\">0</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">.</span>accuracy<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span>\n        predicted_labels<span class=\"token\" style=\"color:#393A34\">.</span>append<span class=\"token\" style=\"color:#393A34\">(</span>pred_1<span class=\"token\" style=\"color:#393A34\">)</span>\n    <span class=\"token\" style=\"color:#0000ff\">else</span><span class=\"token\" style=\"color:#393A34\">:</span>\n        predicted_labels<span class=\"token\" style=\"color:#393A34\">.</span>append<span class=\"token\" style=\"color:#393A34\">(</span>pred_2<span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[25]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># save and print the validation results</span>\n\nresults_df <span class=\"token\" style=\"color:#393A34\">=</span> pd<span class=\"token\" style=\"color:#393A34\">.</span>concat<span class=\"token\" style=\"color:#393A34\">(</span>predicted_labels<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">.</span>sort_values<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;n&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span> ascending<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">False</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">.</span>reset_index<span class=\"token\" style=\"color:#393A34\">(</span>drop <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#36acaa\">True</span><span class=\"token\" style=\"color:#393A34\">)</span>\n\nresults_df</code></pre></div><div class=\"sc-htoDjs wOXyQ nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><div><div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>label</th>\n      <th>n</th>\n      <th>accuracy</th>\n      <th>precision</th>\n      <th>recall</th>\n      <th>model</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>kind/bug</td>\n      <td>3736</td>\n      <td>0.608672</td>\n      <td>0.622650</td>\n      <td>0.630086</td>\n      <td>ft</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>kind/test-flake</td>\n      <td>2170</td>\n      <td>0.855760</td>\n      <td>0.833453</td>\n      <td>0.890481</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>component/cli</td>\n      <td>1746</td>\n      <td>0.753718</td>\n      <td>0.746939</td>\n      <td>0.768113</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>kind/question</td>\n      <td>1496</td>\n      <td>0.676479</td>\n      <td>0.673481</td>\n      <td>0.686258</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>area/usability</td>\n      <td>1310</td>\n      <td>0.734351</td>\n      <td>0.739950</td>\n      <td>0.721604</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>component/build</td>\n      <td>1296</td>\n      <td>0.828729</td>\n      <td>0.867716</td>\n      <td>0.777932</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>component/web</td>\n      <td>1274</td>\n      <td>0.882276</td>\n      <td>0.912251</td>\n      <td>0.845308</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>area/tests</td>\n      <td>1198</td>\n      <td>0.806311</td>\n      <td>0.816642</td>\n      <td>0.790193</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>component/apps</td>\n      <td>970</td>\n      <td>0.838144</td>\n      <td>0.883182</td>\n      <td>0.781044</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>component/kubernetes</td>\n      <td>782</td>\n      <td>0.650939</td>\n      <td>0.656874</td>\n      <td>0.654727</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>component/imageregistry</td>\n      <td>648</td>\n      <td>0.827144</td>\n      <td>0.884274</td>\n      <td>0.765007</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>component/networking</td>\n      <td>646</td>\n      <td>0.756947</td>\n      <td>0.797961</td>\n      <td>0.686711</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>component/auth</td>\n      <td>596</td>\n      <td>0.781821</td>\n      <td>0.846970</td>\n      <td>0.693826</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>13</th>\n      <td>sig/master</td>\n      <td>596</td>\n      <td>0.676148</td>\n      <td>0.703599</td>\n      <td>0.608996</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>area/techdebt</td>\n      <td>588</td>\n      <td>0.809547</td>\n      <td>0.791135</td>\n      <td>0.844057</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>15</th>\n      <td>component/routing</td>\n      <td>490</td>\n      <td>0.900000</td>\n      <td>0.958396</td>\n      <td>0.838904</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>16</th>\n      <td>component/restapi</td>\n      <td>416</td>\n      <td>0.725588</td>\n      <td>0.738918</td>\n      <td>0.697037</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>17</th>\n      <td>area/security</td>\n      <td>394</td>\n      <td>0.705615</td>\n      <td>0.741544</td>\n      <td>0.633591</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>18</th>\n      <td>component/storage</td>\n      <td>374</td>\n      <td>0.807532</td>\n      <td>0.906864</td>\n      <td>0.691630</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>19</th>\n      <td>component/internal-tools</td>\n      <td>346</td>\n      <td>0.777516</td>\n      <td>0.792083</td>\n      <td>0.750495</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>20</th>\n      <td>component/install</td>\n      <td>338</td>\n      <td>0.766023</td>\n      <td>0.851737</td>\n      <td>0.643767</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>21</th>\n      <td>sig/developer-experience</td>\n      <td>326</td>\n      <td>0.736131</td>\n      <td>0.765127</td>\n      <td>0.692916</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>22</th>\n      <td>kind/post-rebase</td>\n      <td>306</td>\n      <td>0.803966</td>\n      <td>0.843693</td>\n      <td>0.745036</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>23</th>\n      <td>component/composition</td>\n      <td>290</td>\n      <td>0.786207</td>\n      <td>0.821728</td>\n      <td>0.740136</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>24</th>\n      <td>component/image</td>\n      <td>270</td>\n      <td>0.781481</td>\n      <td>0.869381</td>\n      <td>0.671396</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>25</th>\n      <td>sig/security</td>\n      <td>250</td>\n      <td>0.720000</td>\n      <td>0.804619</td>\n      <td>0.601293</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>26</th>\n      <td>sig/networking</td>\n      <td>236</td>\n      <td>0.788121</td>\n      <td>0.836534</td>\n      <td>0.731620</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>27</th>\n      <td>area/documentation</td>\n      <td>228</td>\n      <td>0.758454</td>\n      <td>0.779365</td>\n      <td>0.748832</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>28</th>\n      <td>component/cluster-up</td>\n      <td>202</td>\n      <td>0.837073</td>\n      <td>0.872709</td>\n      <td>0.798788</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>29</th>\n      <td>area/performance</td>\n      <td>202</td>\n      <td>0.802317</td>\n      <td>0.853333</td>\n      <td>0.764815</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>30</th>\n      <td>area/infrastructure</td>\n      <td>166</td>\n      <td>0.747237</td>\n      <td>0.780866</td>\n      <td>0.728464</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>31</th>\n      <td>component/logging</td>\n      <td>150</td>\n      <td>0.833333</td>\n      <td>0.913333</td>\n      <td>0.752017</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>32</th>\n      <td>sig/pod</td>\n      <td>138</td>\n      <td>0.753704</td>\n      <td>0.790317</td>\n      <td>0.688315</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>33</th>\n      <td>help wanted</td>\n      <td>134</td>\n      <td>0.678348</td>\n      <td>0.667200</td>\n      <td>0.826468</td>\n      <td>ft</td>\n    </tr>\n    <tr>\n      <th>34</th>\n      <td>sig/storage</td>\n      <td>132</td>\n      <td>0.809972</td>\n      <td>0.888333</td>\n      <td>0.731589</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>35</th>\n      <td>component/metrics</td>\n      <td>130</td>\n      <td>0.884615</td>\n      <td>1.000000</td>\n      <td>0.777179</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>36</th>\n      <td>kind/feature</td>\n      <td>110</td>\n      <td>0.672727</td>\n      <td>0.699301</td>\n      <td>0.662222</td>\n      <td>ft</td>\n    </tr>\n    <tr>\n      <th>37</th>\n      <td>component/containers</td>\n      <td>104</td>\n      <td>0.721429</td>\n      <td>0.785065</td>\n      <td>0.630303</td>\n      <td>svm</td>\n    </tr>\n  </tbody>\n</table>\n</div></div></div></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[26]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># set conditions for saving the model of a potential label</span>\n\nmin_accuracy <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#36acaa\">0.75</span>\n\nmin_precision <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#36acaa\">0.75</span>\n\nmin_recall <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#36acaa\">0.0</span>\n\n<span class=\"token\" style=\"color:#008000;font-style:italic\"># add in the labels you want to have a model for anyway</span>\n\naddins <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&quot;kind/bug&quot;</span><span class=\"token\" style=\"color:#393A34\">]</span>\n\ncondition1 <span class=\"token\" style=\"color:#393A34\">=</span> results_df<span class=\"token\" style=\"color:#393A34\">.</span>accuracy <span class=\"token\" style=\"color:#393A34\">&gt;</span> min_accuracy\ncondition2 <span class=\"token\" style=\"color:#393A34\">=</span> results_df<span class=\"token\" style=\"color:#393A34\">.</span>precision <span class=\"token\" style=\"color:#393A34\">&gt;</span> min_precision\ncond <span class=\"token\" style=\"color:#393A34\">=</span> condition1 <span class=\"token\" style=\"color:#393A34\">&amp;</span> condition2\n\nto_save <span class=\"token\" style=\"color:#393A34\">=</span> results_df<span class=\"token\" style=\"color:#393A34\">[</span>cond <span class=\"token\" style=\"color:#393A34\">|</span> results_df<span class=\"token\" style=\"color:#393A34\">.</span>label<span class=\"token\" style=\"color:#393A34\">.</span>isin<span class=\"token\" style=\"color:#393A34\">(</span>addins<span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">]</span>\n\nlabels_to_save <span class=\"token\" style=\"color:#393A34\">=</span> to_save<span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&quot;label&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span> <span class=\"token\" style=\"color:#A31515\">&quot;model&quot;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">.</span>values\n\nto_save</code></pre></div><div class=\"sc-htoDjs wOXyQ nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><div><div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>label</th>\n      <th>n</th>\n      <th>accuracy</th>\n      <th>precision</th>\n      <th>recall</th>\n      <th>model</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>kind/bug</td>\n      <td>3736</td>\n      <td>0.608672</td>\n      <td>0.622650</td>\n      <td>0.630086</td>\n      <td>ft</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>kind/test-flake</td>\n      <td>2170</td>\n      <td>0.855760</td>\n      <td>0.833453</td>\n      <td>0.890481</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>component/build</td>\n      <td>1296</td>\n      <td>0.828729</td>\n      <td>0.867716</td>\n      <td>0.777932</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>component/web</td>\n      <td>1274</td>\n      <td>0.882276</td>\n      <td>0.912251</td>\n      <td>0.845308</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>area/tests</td>\n      <td>1198</td>\n      <td>0.806311</td>\n      <td>0.816642</td>\n      <td>0.790193</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>component/apps</td>\n      <td>970</td>\n      <td>0.838144</td>\n      <td>0.883182</td>\n      <td>0.781044</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>component/imageregistry</td>\n      <td>648</td>\n      <td>0.827144</td>\n      <td>0.884274</td>\n      <td>0.765007</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>component/networking</td>\n      <td>646</td>\n      <td>0.756947</td>\n      <td>0.797961</td>\n      <td>0.686711</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>component/auth</td>\n      <td>596</td>\n      <td>0.781821</td>\n      <td>0.846970</td>\n      <td>0.693826</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>area/techdebt</td>\n      <td>588</td>\n      <td>0.809547</td>\n      <td>0.791135</td>\n      <td>0.844057</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>15</th>\n      <td>component/routing</td>\n      <td>490</td>\n      <td>0.900000</td>\n      <td>0.958396</td>\n      <td>0.838904</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>18</th>\n      <td>component/storage</td>\n      <td>374</td>\n      <td>0.807532</td>\n      <td>0.906864</td>\n      <td>0.691630</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>19</th>\n      <td>component/internal-tools</td>\n      <td>346</td>\n      <td>0.777516</td>\n      <td>0.792083</td>\n      <td>0.750495</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>20</th>\n      <td>component/install</td>\n      <td>338</td>\n      <td>0.766023</td>\n      <td>0.851737</td>\n      <td>0.643767</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>22</th>\n      <td>kind/post-rebase</td>\n      <td>306</td>\n      <td>0.803966</td>\n      <td>0.843693</td>\n      <td>0.745036</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>23</th>\n      <td>component/composition</td>\n      <td>290</td>\n      <td>0.786207</td>\n      <td>0.821728</td>\n      <td>0.740136</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>24</th>\n      <td>component/image</td>\n      <td>270</td>\n      <td>0.781481</td>\n      <td>0.869381</td>\n      <td>0.671396</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>26</th>\n      <td>sig/networking</td>\n      <td>236</td>\n      <td>0.788121</td>\n      <td>0.836534</td>\n      <td>0.731620</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>27</th>\n      <td>area/documentation</td>\n      <td>228</td>\n      <td>0.758454</td>\n      <td>0.779365</td>\n      <td>0.748832</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>28</th>\n      <td>component/cluster-up</td>\n      <td>202</td>\n      <td>0.837073</td>\n      <td>0.872709</td>\n      <td>0.798788</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>29</th>\n      <td>area/performance</td>\n      <td>202</td>\n      <td>0.802317</td>\n      <td>0.853333</td>\n      <td>0.764815</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>31</th>\n      <td>component/logging</td>\n      <td>150</td>\n      <td>0.833333</td>\n      <td>0.913333</td>\n      <td>0.752017</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>32</th>\n      <td>sig/pod</td>\n      <td>138</td>\n      <td>0.753704</td>\n      <td>0.790317</td>\n      <td>0.688315</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>34</th>\n      <td>sig/storage</td>\n      <td>132</td>\n      <td>0.809972</td>\n      <td>0.888333</td>\n      <td>0.731589</td>\n      <td>svm</td>\n    </tr>\n    <tr>\n      <th>35</th>\n      <td>component/metrics</td>\n      <td>130</td>\n      <td>0.884615</td>\n      <td>1.000000</td>\n      <td>0.777179</td>\n      <td>svm</td>\n    </tr>\n  </tbody>\n</table>\n</div></div></div></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[27]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\">use_ceph <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#36acaa\">True</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[28]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\">labels_to_save</code></pre></div><div class=\"sc-htoDjs wOXyQ nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><pre><code><span>array([[&#x27;kind/bug&#x27;, &#x27;ft&#x27;],\n       [&#x27;kind/test-flake&#x27;, &#x27;svm&#x27;],\n       [&#x27;component/build&#x27;, &#x27;svm&#x27;],\n       [&#x27;component/web&#x27;, &#x27;svm&#x27;],\n       [&#x27;area/tests&#x27;, &#x27;svm&#x27;],\n       [&#x27;component/apps&#x27;, &#x27;svm&#x27;],\n       [&#x27;component/imageregistry&#x27;, &#x27;svm&#x27;],\n       [&#x27;component/networking&#x27;, &#x27;svm&#x27;],\n       [&#x27;component/auth&#x27;, &#x27;svm&#x27;],\n       [&#x27;area/techdebt&#x27;, &#x27;svm&#x27;],\n       [&#x27;component/routing&#x27;, &#x27;svm&#x27;],\n       [&#x27;component/storage&#x27;, &#x27;svm&#x27;],\n       [&#x27;component/internal-tools&#x27;, &#x27;svm&#x27;],\n       [&#x27;component/install&#x27;, &#x27;svm&#x27;],\n       [&#x27;kind/post-rebase&#x27;, &#x27;svm&#x27;],\n       [&#x27;component/composition&#x27;, &#x27;svm&#x27;],\n       [&#x27;component/image&#x27;, &#x27;svm&#x27;],\n       [&#x27;sig/networking&#x27;, &#x27;svm&#x27;],\n       [&#x27;area/documentation&#x27;, &#x27;svm&#x27;],\n       [&#x27;component/cluster-up&#x27;, &#x27;svm&#x27;],\n       [&#x27;area/performance&#x27;, &#x27;svm&#x27;],\n       [&#x27;component/logging&#x27;, &#x27;svm&#x27;],\n       [&#x27;sig/pod&#x27;, &#x27;svm&#x27;],\n       [&#x27;sig/storage&#x27;, &#x27;svm&#x27;],\n       [&#x27;component/metrics&#x27;, &#x27;svm&#x27;]], dtype=object)</span></code></pre></div></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[29]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#0000ff\">if</span> <span class=\"token\" style=\"color:#0000ff\">not</span> os<span class=\"token\" style=\"color:#393A34\">.</span>path<span class=\"token\" style=\"color:#393A34\">.</span>exists<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;./saved_models&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span>\n    os<span class=\"token\" style=\"color:#393A34\">.</span>mkdir<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;./saved_models&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span>\n\n<span class=\"token\" style=\"color:#0000ff\">if</span> <span class=\"token\" style=\"color:#0000ff\">not</span> os<span class=\"token\" style=\"color:#393A34\">.</span>path<span class=\"token\" style=\"color:#393A34\">.</span>exists<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token string-interpolation\"><span class=\"token\" style=\"color:#A31515\">f&quot;./saved_models/</span><span class=\"token interpolation\"><span class=\"token\" style=\"color:#393A34\">{</span>savename<span class=\"token\" style=\"color:#393A34\">}</span></span><span class=\"token\" style=\"color:#A31515\">&quot;</span></span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span>\n    os<span class=\"token\" style=\"color:#393A34\">.</span>mkdir<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token string-interpolation\"><span class=\"token\" style=\"color:#A31515\">f&quot;./saved_models/</span><span class=\"token interpolation\"><span class=\"token\" style=\"color:#393A34\">{</span>savename<span class=\"token\" style=\"color:#393A34\">}</span></span><span class=\"token\" style=\"color:#A31515\">&quot;</span></span><span class=\"token\" style=\"color:#393A34\">)</span>\n\nmodel_dic <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token\" style=\"color:#393A34\">{</span><span class=\"token\" style=\"color:#A31515\">&quot;svm&quot;</span><span class=\"token\" style=\"color:#393A34\">:</span> SVM<span class=\"token\" style=\"color:#393A34\">,</span> <span class=\"token\" style=\"color:#A31515\">&quot;ft&quot;</span><span class=\"token\" style=\"color:#393A34\">:</span> FtModel<span class=\"token\" style=\"color:#393A34\">}</span>\n\n<span class=\"token\" style=\"color:#0000ff\">if</span> use_ceph<span class=\"token\" style=\"color:#393A34\">:</span>\n    <span class=\"token\" style=\"color:#0000ff\">for</span> label<span class=\"token\" style=\"color:#393A34\">,</span> mod <span class=\"token\" style=\"color:#0000ff\">in</span> labels_to_save<span class=\"token\" style=\"color:#393A34\">:</span>\n        X<span class=\"token\" style=\"color:#393A34\">,</span> y <span class=\"token\" style=\"color:#393A34\">=</span> get_subdataset<span class=\"token\" style=\"color:#393A34\">(</span>label<span class=\"token\" style=\"color:#393A34\">)</span>\n        model <span class=\"token\" style=\"color:#393A34\">=</span> model_dic<span class=\"token\" style=\"color:#393A34\">[</span>mod<span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span>\n        model<span class=\"token\" style=\"color:#393A34\">.</span>fit<span class=\"token\" style=\"color:#393A34\">(</span>X<span class=\"token\" style=\"color:#393A34\">,</span> y<span class=\"token\" style=\"color:#393A34\">)</span>\n        lbl_path <span class=\"token\" style=\"color:#393A34\">=</span> os<span class=\"token\" style=\"color:#393A34\">.</span>path<span class=\"token\" style=\"color:#393A34\">.</span>join<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;saved_models&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span> label<span class=\"token\" style=\"color:#393A34\">.</span>replace<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;/&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span> <span class=\"token\" style=\"color:#A31515\">&quot;_&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span>\n        lbl_path <span class=\"token\" style=\"color:#393A34\">+=</span> <span class=\"token\" style=\"color:#A31515\">&quot;.bin&quot;</span> <span class=\"token\" style=\"color:#0000ff\">if</span> mod <span class=\"token\" style=\"color:#393A34\">==</span> <span class=\"token\" style=\"color:#A31515\">&quot;ft&quot;</span> <span class=\"token\" style=\"color:#0000ff\">else</span> <span class=\"token\" style=\"color:#A31515\">&quot;.joblib&quot;</span>\n        model<span class=\"token\" style=\"color:#393A34\">.</span>save<span class=\"token\" style=\"color:#393A34\">(</span>lbl_path<span class=\"token\" style=\"color:#393A34\">)</span>\n        key <span class=\"token\" style=\"color:#393A34\">=</span> <span class=\"token string-interpolation\"><span class=\"token\" style=\"color:#A31515\">f&quot;github-labeler/</span><span class=\"token interpolation\"><span class=\"token\" style=\"color:#393A34\">{</span>savename<span class=\"token\" style=\"color:#393A34\">}</span></span><span class=\"token\" style=\"color:#A31515\">/</span><span class=\"token interpolation\"><span class=\"token\" style=\"color:#393A34\">{</span>lbl_path<span class=\"token\" style=\"color:#393A34\">}</span></span><span class=\"token\" style=\"color:#A31515\">&quot;</span></span>\n        s3<span class=\"token\" style=\"color:#393A34\">.</span>upload_file<span class=\"token\" style=\"color:#393A34\">(</span>Bucket<span class=\"token\" style=\"color:#393A34\">=</span>s3_bucket<span class=\"token\" style=\"color:#393A34\">,</span> Key<span class=\"token\" style=\"color:#393A34\">=</span>key<span class=\"token\" style=\"color:#393A34\">,</span> Filename<span class=\"token\" style=\"color:#393A34\">=</span>lbl_path<span class=\"token\" style=\"color:#393A34\">)</span>\n        os<span class=\"token\" style=\"color:#393A34\">.</span>remove<span class=\"token\" style=\"color:#393A34\">(</span>lbl_path<span class=\"token\" style=\"color:#393A34\">)</span>\n<span class=\"token\" style=\"color:#0000ff\">else</span><span class=\"token\" style=\"color:#393A34\">:</span>\n    <span class=\"token\" style=\"color:#0000ff\">for</span> label <span class=\"token\" style=\"color:#0000ff\">in</span> labels_to_save<span class=\"token\" style=\"color:#393A34\">:</span>\n        X<span class=\"token\" style=\"color:#393A34\">,</span> y <span class=\"token\" style=\"color:#393A34\">=</span> get_subdataset<span class=\"token\" style=\"color:#393A34\">(</span>label<span class=\"token\" style=\"color:#393A34\">)</span>\n        model <span class=\"token\" style=\"color:#393A34\">=</span> model_dic<span class=\"token\" style=\"color:#393A34\">[</span>model<span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span>\n        model<span class=\"token\" style=\"color:#393A34\">.</span>fit<span class=\"token\" style=\"color:#393A34\">(</span>X<span class=\"token\" style=\"color:#393A34\">,</span> y<span class=\"token\" style=\"color:#393A34\">)</span>\n        lbl_path <span class=\"token\" style=\"color:#393A34\">=</span> os<span class=\"token\" style=\"color:#393A34\">.</span>path<span class=\"token\" style=\"color:#393A34\">.</span>join<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;saved_models&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span> label<span class=\"token\" style=\"color:#393A34\">.</span>replace<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;/&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span> <span class=\"token\" style=\"color:#A31515\">&quot;_&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span>\n        lbl_path <span class=\"token\" style=\"color:#393A34\">+=</span> <span class=\"token\" style=\"color:#A31515\">&quot;.bin&quot;</span> <span class=\"token\" style=\"color:#0000ff\">if</span> model <span class=\"token\" style=\"color:#393A34\">==</span> <span class=\"token\" style=\"color:#A31515\">&quot;ft&quot;</span> <span class=\"token\" style=\"color:#0000ff\">else</span> <span class=\"token\" style=\"color:#A31515\">&quot;.joblib&quot;</span>\n        model<span class=\"token\" style=\"color:#393A34\">.</span>save<span class=\"token\" style=\"color:#393A34\">(</span>lbl_path<span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-bxivhb HLmih cell\" style=\"box-shadow:none\"><div class=\"sc-gzVnrw iiEGBE input-container\"><div class=\"sc-bwzfXH jsVRSS prompt\">[30]</div><pre class=\"sc-bZQynM dQAqiJ input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:0.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># save information of who to ignore (so the app knows not to tag these issues)</span>\n\n<span class=\"token\" style=\"color:#0000ff\">with</span> <span class=\"token builtin\">open</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;botlist.txt&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span> <span class=\"token\" style=\"color:#A31515\">&quot;w&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#0000ff\">as</span> f<span class=\"token\" style=\"color:#393A34\">:</span>\n    <span class=\"token\" style=\"color:#0000ff\">for</span> b <span class=\"token\" style=\"color:#0000ff\">in</span> bots<span class=\"token\" style=\"color:#393A34\">:</span>\n        f<span class=\"token\" style=\"color:#393A34\">.</span>write<span class=\"token\" style=\"color:#393A34\">(</span>b<span class=\"token\" style=\"color:#393A34\">)</span>\n        f<span class=\"token\" style=\"color:#393A34\">.</span>write<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;\\n&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span>\n\n<span class=\"token\" style=\"color:#008000;font-style:italic\"># save label names</span>\n\n<span class=\"token\" style=\"color:#0000ff\">with</span> <span class=\"token builtin\">open</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;labellist.txt&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span> <span class=\"token\" style=\"color:#A31515\">&quot;w&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span> <span class=\"token\" style=\"color:#0000ff\">as</span> f<span class=\"token\" style=\"color:#393A34\">:</span>\n    <span class=\"token\" style=\"color:#0000ff\">for</span> label<span class=\"token\" style=\"color:#393A34\">,</span> model <span class=\"token\" style=\"color:#0000ff\">in</span> labels_to_save<span class=\"token\" style=\"color:#393A34\">:</span>\n        f<span class=\"token\" style=\"color:#393A34\">.</span>write<span class=\"token\" style=\"color:#393A34\">(</span>label <span class=\"token\" style=\"color:#393A34\">+</span> <span class=\"token\" style=\"color:#A31515\">&quot;\\t&quot;</span> <span class=\"token\" style=\"color:#393A34\">+</span> model<span class=\"token\" style=\"color:#393A34\">)</span>\n        f<span class=\"token\" style=\"color:#393A34\">.</span>write<span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;\\n&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span>\n\n<span class=\"token\" style=\"color:#0000ff\">if</span> use_ceph<span class=\"token\" style=\"color:#393A34\">:</span>\n    s3<span class=\"token\" style=\"color:#393A34\">.</span>upload_file<span class=\"token\" style=\"color:#393A34\">(</span>\n        Bucket<span class=\"token\" style=\"color:#393A34\">=</span>s3_bucket<span class=\"token\" style=\"color:#393A34\">,</span>\n        Key<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token string-interpolation\"><span class=\"token\" style=\"color:#A31515\">f&quot;github-labeler/</span><span class=\"token interpolation\"><span class=\"token\" style=\"color:#393A34\">{</span>savename<span class=\"token\" style=\"color:#393A34\">}</span></span><span class=\"token\" style=\"color:#A31515\">/botlist.txt&quot;</span></span><span class=\"token\" style=\"color:#393A34\">,</span>\n        Filename<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;botlist.txt&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span>\n    <span class=\"token\" style=\"color:#393A34\">)</span>\n    s3<span class=\"token\" style=\"color:#393A34\">.</span>upload_file<span class=\"token\" style=\"color:#393A34\">(</span>\n        Bucket<span class=\"token\" style=\"color:#393A34\">=</span>s3_bucket<span class=\"token\" style=\"color:#393A34\">,</span>\n        Key<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token string-interpolation\"><span class=\"token\" style=\"color:#A31515\">f&quot;github-labeler/</span><span class=\"token interpolation\"><span class=\"token\" style=\"color:#393A34\">{</span>savename<span class=\"token\" style=\"color:#393A34\">}</span></span><span class=\"token\" style=\"color:#A31515\">/labellist.txt&quot;</span></span><span class=\"token\" style=\"color:#393A34\">,</span>\n        Filename<span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;labellist.txt&quot;</span><span class=\"token\" style=\"color:#393A34\">,</span>\n    <span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div></div></div>","fields":{"srcLink":"https://github.com/aicoe-aiops/github-labeler/blob/master/models/train_models.ipynb"}}},"pageContext":{"id":"644119b7-387c-5f1f-b89f-f17a2432ef97 >>> JupyterNotebook"}},"staticQueryHashes":["117426894","1764348645","3000541721","3606484676"]}