{"componentChunkName":"component---src-templates-markdown-remark-js","path":"/hitchhikers-guide/apps/docs/argocd-gitops/add_application.md","result":{"data":{"site":{"siteMetadata":{"title":"Operate First"}},"markdownRemark":{"id":"12af96bb-1613-50cd-b4f0-0db93c207e6b","html":"<h1 id=\"adding-argocd-applications\" style=\"position:relative;\"><a href=\"#adding-argocd-applications\" aria-label=\"adding argocd applications permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding ArgoCD Applications</h1>\n<p>This doc explains how to add ArgoCD Applications declaratively to the <code class=\"language-text\">apps</code> repo.</p>\n<h2 id=\"pre-requisites\" style=\"position:relative;\"><a href=\"#pre-requisites\" aria-label=\"pre requisites permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pre-requisites</h2>\n<ul class=\"pf-c-list\">\n<li>You should have <a href=\"https://kubectl.docs.kubernetes.io/installation/kustomize/\">kustomize</a> installed</li>\n<li>You should be familiar with <a href=\"https://kubernetes.io/docs/tasks/manage-kubernetes-objects/kustomization/#bases-and-overlays\">kustomize overlays</a></li>\n<li>You should be familiar with what an <a href=\"https://argoproj.github.io/argo-cd/operator-manual/declarative-setup/#applications\">ArgoCD application</a> is.</li>\n<li>You or your team should have been on boarded to ArgoCD, and have an ArgoCD project created. If you do not have one please request one for your team by filing this <a href=\"https://github.com/operate-first/support/issues/new?assignees=first-operator&#x26;labels=kind%2Fonboarding%2Carea%2Fargocd&#x26;template=onboarding_argocd.yaml&#x26;title=PROJECT%3A+%3Cname%3E\">issue here.</a></li>\n</ul>\n<h3 id=\"add-an-application-to-the-apps-repo-declaratively\" style=\"position:relative;\"><a href=\"#add-an-application-to-the-apps-repo-declaratively\" aria-label=\"add an application to the apps repo declaratively permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Add an Application to the Apps repo (declaratively)</h3>\n<p>All our <code class=\"language-text\">clusters</code> belong to some <code class=\"language-text\">environment</code>. The list of our <code class=\"language-text\">environments</code> can be found <a href=\"https://github.com/operate-first/apps/tree/master/argocd/overlays/moc-infra/applications/envs\">here</a>. Within each <code class=\"language-text\">environment</code> you will find a list of clusters. For example within <code class=\"language-text\">moc</code> environment, you will find clusters <code class=\"language-text\">infra</code> and <code class=\"language-text\">smaug</code>. Pick one such cluster that you would like to deploy to. Let’s say you would like to deploy to cluster called <code class=\"language-text\">${CLUSTER_NAME}</code> in environment <code class=\"language-text\">${ENV}</code>. Then follow these steps:</p>\n<ul class=\"pf-c-list\">\n<li>See ArgoCD Docs for how to create an ArgoCD <code class=\"language-text\">Application</code> <a href=\"https://argoproj.github.io/argo-cd/operator-manual/declarative-setup/#applications\">here</a>.</li>\n<li>Ensure that the <code class=\"language-text\">spec.destination</code> field in your Argocd <code class=\"language-text\">Applicaiton</code> matches the <em>cluster name</em> as it’s stored in ArgoCD. To get this value, you can search the <code class=\"language-text\">metadata.name</code> in the clusters found <a href=\"https://github.com/operate-first/apps/tree/master/acm/overlays/moc/infra/managedclusters\">here</a>. Or look at any of the other manifests in this repo and find the one that corresponds to <code class=\"language-text\">${CLUSTER_NAME}</code>.</li>\n<li>Ensure that your <code class=\"language-text\">spec.project</code> matches your team’s ArgoCD project.</li>\n<li>Add your ArgoCD Application to <code class=\"language-text\">argocd/overlays/moc-infra/applications/envs/${ENV}/${CLUSTER_NAME}/{$PROJECT}</code> where <code class=\"language-text\">{$PROJECT}</code> correlates with your team’s project.</li>\n<li>Add this resource’s file name to the <code class=\"language-text\">resource</code> field list in <code class=\"language-text\">argocd/overlays/moc-infra/applications/envs/${ENV}/${CLUSTER_NAME}/{$PROJECT}/kustomization.yaml</code> .</li>\n</ul>","fields":{"srcLink":"https://github.com/operate-first/apps/blob/master/docs/argocd-gitops/add_application.md"},"frontmatter":{"title":"","description":null,"extraClasses":null,"banner":null}}},"pageContext":{"id":"12af96bb-1613-50cd-b4f0-0db93c207e6b"}},"staticQueryHashes":["117426894","1764348645","3000541721","3606484676"]}